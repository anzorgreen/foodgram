server {
    listen 80;
    client_max_body_size 10M;
    server_name localhost; # from anzor

    location /api/docs/ {
        root /usr/share/nginx/html;
        try_files $uri $uri/redoc.html;
    }
    
    location / {
        root /usr/share/nginx/html;
        index  index.html index.htm;
        try_files $uri /index.html;
      }
    location /api/ {
    proxy_set_header Host $http_host;
    proxy_pass http://foodgram-back:8000/api/;
    }
    
    location /admin/ {
    proxy_set_header Host $http_host;
    proxy_pass http://foodgram-back:8000/admin/;
    }
    

    location /static/admin/ {
        alias /staticfiles/admin/ ;  # Путь, где хранятся статические файлы
    }

    # location /static/rest_framework/ {
    #     root /staticfiles/;
    # }

    location /media/ {
        alias /var/www/foodgram/media/; 

    }
}



# /static/media/userpic-icon.2e3faa821bb5398be2c6.jpg HTTP/1.1 - Запрос от фронтенда
# /usr/share/nginx/html/static/media/userpic-icon.2e3faa821bb5398be2c6.jpg полый путь запроса на фронтенд
#foodgram-proxy  | 2025/03/04 19:03:21 [error] 31#31: 
# *14 open() 
# "/var/www/foodgram/media/media/users/images/avatar_pqwWEHV.png"
# "GET /media/users/images/avatar_pqwWEHV.png HTTP/1.1", host: "localhost", referrer: "http://localhost/recipes/19"


